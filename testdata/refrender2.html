<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Table Lookup</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <!-- Required Stylesheets -->
    <link
            type="text/css"
            rel="stylesheet"
            href="https://unpkg.com/bootstrap/dist/css/bootstrap.min.css"
    />
    <link
            type="text/css"
            rel="stylesheet"
            href="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.css"
    />

    <!-- Load polyfills to support older browsers -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es2015%2CIntersectionObserver"></script>

    <!-- Required scripts -->
    <script src="https://unpkg.com/vue@latest/dist/vue.min.js"></script>
    <script src="https://unpkg.com/bootstrap-vue@latest/dist/bootstrap-vue.min.js"></script>
</head>
<body>
<div id="app">
    <b-form inline>
        <b-row>
            <b-col cols="8">
                <b-input-group prepend="Filtre" xl="8" class="mt-3">
                    <b-form-input type="search" autofocus="true" autocomplete="off"
                                  placeholder="Introduisez ici votre filtre de recherche!" debounce="200"
                                  v-model="contentFilterInput" @update="refreshTable"></b-form-input>
                </b-input-group>
            </b-col>
            <b-col cols="2">
                <b-input-group prepend="Limite" xl="2" class="mt-3">
                    <b-form-input id="itemLimitBox" type="number" autocomplete="off" debounce="200"
                                  placeholder="Limite d'enregistrements" v-model="itemLimit"
                                  @update="refreshTable"></b-form-input>
                </b-input-group>
            </b-col>
            <b-col cols="2">
                <b-input-group prepend="Enr./Page" xl="2" class="mt-3">
                    <b-form-input id="perPageBox" type="number" autocomplete="off" debounce="200"
                                  placeholder="Enregistrements par page" v-model="perPage"
                                  @update="refreshTable"></b-form-input>
                </b-input-group>
            </b-col>
        </b-row>
    </b-form>
    <div v-if="rows > itemLimit" class="text-danger mt-3 col-12">Nombre d'enregistrements: {{ rows }} - au dessus de
        {{ itemLimit }} résultats, rien n'est affiché pour des raisons de performance
    </div>
    <div v-else class="text-success mt-3 col-12">Nombre d'enregistrements: {{ rows }}</div>
    <div v-show="rows <= itemLimit ">
        <b-table id="lookupTable" :items="items" :fields="fields" :sort-by.sync="sortBy"
                 :sort-desc.sync="sortDesc" :per-page="perPage" :current-page="currentPage"
                 hover bordered striped>
        </b-table>
        <div v-show="rows > perPage">
            <div class="mt-1">
                <b-pagination v-model="currentPage" pills :total-rows="rows" :per-page="perPage" :limit="pageLimit"
                              aria-controls="lookupTable" first-number last-number size="lg"></b-pagination>
            </div>
        </div>
    </div>
</div>
<script>
    window.app = new Vue({
        el: '#app',
        data() {
            return {
                rows: 0,
                pageLimit: 3,
                perPage: 20,
                itemLimit: 301,
                currentPage: 1,
                contentFilterInput: "",
                normalizedSearchArray: "",
                sortBy: '',
                sortDesc: false,
                fields: [{"key":"year","sortable":"true"},{"key":"age","sortable":"true"},{"key":"name","sortable":"true"},{"key":"name_of_the_movie","sortable":"true"}],
                items: [],
                itemTable: [{"_cellVariants":{"age":"danger"},"_rowVariant":"warning","age":"22","index":"1","name":"Janet Gaynor","name_of_the_movie":"Seventh Heaven, Street Angel and Sunrise: A Song of Two Humans","normalized_search_column":"1928janetgaynorseventhheaven,streetangelandsunrise:asongoftwohumans","year":"1928"},{"_cellVariants":{"name":"primary"},"_rowVariant":"warning","age":"37","index":"2","name":"Mary Pickford","name_of_the_movie":"Coquette","normalized_search_column":"1929marypickfordcoquette","year":"1929"},{"_cellVariants":{"name":"primary"},"_rowVariant":"warning","age":"28","index":"3","name":"Norma Shearer","name_of_the_movie":"The Divorcee","normalized_search_column":"1930normashearerthedivorcee","year":"1930"},{"_cellVariants":{"name":"primary"},"_rowVariant":"warning","age":"63","index":"4","name":"Marie Dressler","name_of_the_movie":"Min and Bill","normalized_search_column":"1931mariedresslerminandbill","year":"1931"},{"_cellVariants":{"age":"info"},"_rowVariant":"warning","age":"32","index":"5","name":"Helen Hayes","name_of_the_movie":"The Sin of Madelon Claudet","normalized_search_column":"1932helenhayesthesinofmadelonclaudet","year":"1932"},{"_rowVariant":"warning","age":"26","index":"6","name":"Katharine Hepburn","name_of_the_movie":"Morning Glory","normalized_search_column":"1933katharinehepburnmorningglory","year":"1933"},{"_cellVariants":{"age":"info"},"_rowVariant":"warning","age":"31","index":"7","name":"Claudette Colbert","name_of_the_movie":"It Happened One Night","normalized_search_column":"1934claudettecolbertithappenedonenight","year":"1934"},{"_rowVariant":"warning","age":"27","index":"8","name":"Bette Davis","name_of_the_movie":"Dangerous","normalized_search_column":"1935bettedavisdangerous","year":"1935"},{"_cellVariants":{"name":"primary"},"_rowVariant":"warning","age":"27","index":"9","name":"Luise Rainer","name_of_the_movie":"The Great Ziegfeld","normalized_search_column":"1936luiserainerthegreatziegfeld","year":"1936"},{"_cellVariants":{"name":"primary"},"age":"28","index":"10","name":"Luise Rainer","name_of_the_movie":"The Good Earth","normalized_search_column":"1937luiserainerthegoodearth","year":"1937"},{"_cellVariants":{"age":"info"},"age":"30","index":"11","name":"Bette Davis","name_of_the_movie":"Jezebel","normalized_search_column":"1938bettedavisjezebel","year":"1938"},{"_cellVariants":{"name":"primary"},"age":"26","index":"12","name":"Vivien Leigh","name_of_the_movie":"Gone with the Wind","normalized_search_column":"1939vivienleighgonewiththewind","year":"1939"},{"age":"29","index":"13","name":"Ginger Rogers","name_of_the_movie":"Kitty Foyle","normalized_search_column":"1940gingerrogerskittyfoyle","year":"1940"},{"age":"24","index":"14","name":"Joan Fontaine","name_of_the_movie":"Suspicion","normalized_search_column":"1941joanfontainesuspicion","year":"1941"},{"_cellVariants":{"age":"info"},"age":"38","index":"15","name":"Greer Garson","name_of_the_movie":"Mrs. Miniver","normalized_search_column":"1942greergarsonmrs.miniver","year":"1942"},{"age":"25","index":"16","name":"Jennifer Jones","name_of_the_movie":"The Song of Bernadette","normalized_search_column":"1943jenniferjonesthesongofbernadette","year":"1943"},{"age":"29","index":"17","name":"Ingrid Bergman","name_of_the_movie":"Gaslight","normalized_search_column":"1944ingridbergmangaslight","year":"1944"},{"_cellVariants":{"age":"info"},"age":"40","index":"18","name":"Joan Crawford","name_of_the_movie":"Mildred Pierce","normalized_search_column":"1945joancrawfordmildredpierce","year":"1945"},{"_cellVariants":{"name":"primary"},"age":"30","index":"19","name":"Olivia de Havilland","name_of_the_movie":"To Each His Own","normalized_search_column":"1946oliviadehavillandtoeachhisown","year":"1946"},{"_cellVariants":{"name":"primary"},"age":"35","index":"20","name":"Loretta Young","name_of_the_movie":"The Farmer's Daughter","normalized_search_column":"1947lorettayoungthefarmer'sdaughter","year":"1947"},{"_cellVariants":{"age":"info"},"age":"32","index":"21","name":"Jane Wyman","name_of_the_movie":"Johnny Belinda","normalized_search_column":"1948janewymanjohnnybelinda","year":"1948"},{"_cellVariants":{"name":"primary"},"age":"33","index":"22","name":"Olivia de Havilland","name_of_the_movie":"The Heiress","normalized_search_column":"1949oliviadehavillandtheheiress","year":"1949"},{"age":"29","index":"23","name":"Judy Holliday","name_of_the_movie":"Born Yesterday","normalized_search_column":"1950judyhollidaybornyesterday","year":"1950"},{"_cellVariants":{"name":"primary"},"age":"38","index":"24","name":"Vivien Leigh","name_of_the_movie":"A Streetcar Named Desire","normalized_search_column":"1951vivienleighastreetcarnameddesire","year":"1951"},{"_cellVariants":{"name":"primary"},"age":"54","index":"25","name":"Shirley Booth","name_of_the_movie":"Come Back, Little Sheba","normalized_search_column":"1952shirleyboothcomeback,littlesheba","year":"1952"},{"age":"24","index":"26","name":"Audrey Hepburn","name_of_the_movie":"Roman Holiday","normalized_search_column":"1953audreyhepburnromanholiday","year":"1953"},{"age":"25","index":"27","name":"Grace Kelly","name_of_the_movie":"The Country Girl","normalized_search_column":"1954gracekellythecountrygirl","year":"1954"},{"_cellVariants":{"age":"info"},"age":"48","index":"28","name":"Anna Magnani","name_of_the_movie":"The Rose Tattoo","normalized_search_column":"1955annamagnanitherosetattoo","year":"1955"},{"_cellVariants":{"age":"info"},"age":"41","index":"29","name":"Ingrid Bergman","name_of_the_movie":"Anastasia","normalized_search_column":"1956ingridbergmananastasia","year":"1956"},{"age":"28","index":"30","name":"Joanne Woodward","name_of_the_movie":"The Three Faces of Eve","normalized_search_column":"1957joannewoodwardthethreefacesofeve","year":"1957"},{"_cellVariants":{"name":"primary"},"age":"41","index":"31","name":"Susan Hayward","name_of_the_movie":"I Want to Live!","normalized_search_column":"1958susanhaywardiwanttolive!","year":"1958"},{"_cellVariants":{"name":"primary"},"age":"39","index":"32","name":"Simone Signoret","name_of_the_movie":"Room at the Top","normalized_search_column":"1959simonesignoretroomatthetop","year":"1959"},{"age":"29","index":"33","name":"Elizabeth Taylor","name_of_the_movie":"BUtterfield 8","normalized_search_column":"1960elizabethtaylorbutterfield8","year":"1960"},{"_cellVariants":{"name":"primary"},"age":"27","index":"34","name":"Sophia Loren","name_of_the_movie":"Two Women","normalized_search_column":"1961sophialorentwowomen","year":"1961"},{"_cellVariants":{"age":"info"},"age":"31","index":"35","name":"Anne Bancroft","name_of_the_movie":"The Miracle Worker","normalized_search_column":"1962annebancroftthemiracleworker","year":"1962"},{"_cellVariants":{"name":"primary"},"age":"31","index":"36","name":"Patricia Neal","name_of_the_movie":"Hud","normalized_search_column":"1963patricianealhud","year":"1963"},{"age":"29","index":"37","name":"Julie Andrews","name_of_the_movie":"Mary Poppins","normalized_search_column":"1964julieandrewsmarypoppins","year":"1964"},{"age":"25","index":"38","name":"Julie Christie","name_of_the_movie":"Darling","normalized_search_column":"1965juliechristiedarling","year":"1965"},{"_cellVariants":{"age":"info"},"age":"35","index":"39","name":"Elizabeth Taylor","name_of_the_movie":"Who's Afraid of Virginia Woolf?","normalized_search_column":"1966elizabethtaylorwho'safraidofvirginiawoolf?","year":"1966"},{"_cellVariants":{"age":"info"},"age":"60","index":"40","name":"Katharine Hepburn","name_of_the_movie":"Guess Who's Coming to Dinner","normalized_search_column":"1967katharinehepburnguesswho'scomingtodinner","year":"1967"},{"_cellVariants":{"age":"info"},"age":"61","index":"41","name":"Katharine Hepburn","name_of_the_movie":"The Lion in Winter","normalized_search_column":"1968katharinehepburnthelioninwinter","year":"1968"},{"age":"26","index":"42","name":"Barbra Streisand","name_of_the_movie":"Funny Girl","normalized_search_column":"1969barbrastreisandfunnygirl","year":"1969"},{"_cellVariants":{"name":"primary"},"age":"35","index":"43","name":"Maggie Smith","name_of_the_movie":"The Prime of Miss Jean Brodie","normalized_search_column":"1970maggiesmiththeprimeofmissjeanbrodie","year":"1970"},{"_cellVariants":{"age":"info"},"age":"34","index":"44","name":"Glenda Jackson","name_of_the_movie":"Women in Love","normalized_search_column":"1971glendajacksonwomeninlove","year":"1971"},{"_cellVariants":{"age":"info"},"age":"34","index":"45","name":"Jane Fonda","name_of_the_movie":"Klute","normalized_search_column":"1972janefondaklute","year":"1972"},{"age":"27","index":"46","name":"Liza Minnelli","name_of_the_movie":"Cabaret","normalized_search_column":"1973lizaminnellicabaret","year":"1973"},{"_cellVariants":{"age":"info"},"age":"37","index":"47","name":"Glenda Jackson","name_of_the_movie":"A Touch of Class","normalized_search_column":"1974glendajacksonatouchofclass","year":"1974"},{"_cellVariants":{"age":"info"},"age":"42","index":"48","name":"Ellen Burstyn","name_of_the_movie":"Alice Doesn't Live Here Anymore","normalized_search_column":"1975ellenburstynalicedoesn'tlivehereanymore","year":"1975"},{"_cellVariants":{"name":"primary"},"age":"41","index":"49","name":"Louise Fletcher","name_of_the_movie":"One Flew Over the Cuckoo's Nest","normalized_search_column":"1976louisefletcheroneflewoverthecuckoo'snest","year":"1976"},{"_cellVariants":{"age":"info"},"age":"36","index":"50","name":"Faye Dunaway","name_of_the_movie":"Network","normalized_search_column":"1977fayedunawaynetwork","year":"1977"},{"_cellVariants":{"age":"info"},"age":"32","index":"51","name":"Diane Keaton","name_of_the_movie":"Annie Hall","normalized_search_column":"1978dianekeatonanniehall","year":"1978"},{"_cellVariants":{"age":"info"},"age":"41","index":"52","name":"Jane Fonda","name_of_the_movie":"Coming Home","normalized_search_column":"1979janefondacominghome","year":"1979"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"33","index":"53","name":"Sally Field","name_of_the_movie":"Norma Rae","normalized_search_column":"1980sallyfieldnormarae","year":"1980"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"31","index":"54","name":"Sissy Spacek","name_of_the_movie":"Coal Miner's Daughter","normalized_search_column":"1981sissyspacekcoalminer'sdaughter","year":"1981"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"74","index":"55","name":"Katharine Hepburn","name_of_the_movie":"On Golden Pond","normalized_search_column":"1982katharinehepburnongoldenpond","year":"1982"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"33","index":"56","name":"Meryl Streep","name_of_the_movie":"Sophie's Choice","normalized_search_column":"1983merylstreepsophie'schoice","year":"1983"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"49","index":"57","name":"Shirley MacLaine","name_of_the_movie":"Terms of Endearment","normalized_search_column":"1984shirleymaclainetermsofendearment","year":"1984"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"38","index":"58","name":"Sally Field","name_of_the_movie":"Places in the Heart","normalized_search_column":"1985sallyfieldplacesintheheart","year":"1985"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"61","index":"59","name":"Geraldine Page","name_of_the_movie":"The Trip to Bountiful","normalized_search_column":"1986geraldinepagethetriptobountiful","year":"1986"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"21","index":"60","name":"Marlee Matlin","name_of_the_movie":"Children of a Lesser God","normalized_search_column":"1987marleematlinchildrenofalessergod","year":"1987"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"41","index":"61","name":"Cher","name_of_the_movie":"Moonstruck","normalized_search_column":"1988chermoonstruck","year":"1988"},{"_rowVariant":"success","age":"26","index":"62","name":"Jodie Foster","name_of_the_movie":"The Accused","normalized_search_column":"1989jodiefostertheaccused","year":"1989"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"80","index":"63","name":"Jessica Tandy","name_of_the_movie":"Driving Miss Daisy","normalized_search_column":"1990jessicatandydrivingmissdaisy","year":"1990"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"42","index":"64","name":"Kathy Bates","name_of_the_movie":"Misery","normalized_search_column":"1991kathybatesmisery","year":"1991"},{"_rowVariant":"success","age":"29","index":"65","name":"Jodie Foster","name_of_the_movie":"The Silence of the Lambs","normalized_search_column":"1992jodiefosterthesilenceofthelambs","year":"1992"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"33","index":"66","name":"Emma Thompson","name_of_the_movie":"Howards End","normalized_search_column":"1993emmathompsonhowardsend","year":"1993"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"36","index":"67","name":"Holly Hunter","name_of_the_movie":"The Piano","normalized_search_column":"1994hollyhunterthepiano","year":"1994"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"45","index":"68","name":"Jessica Lange","name_of_the_movie":"Blue Sky","normalized_search_column":"1995jessicalangebluesky","year":"1995"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"49","index":"69","name":"Susan Sarandon","name_of_the_movie":"Dead Man Walking","normalized_search_column":"1996susansarandondeadmanwalking","year":"1996"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"39","index":"70","name":"Frances McDormand","name_of_the_movie":"Fargo","normalized_search_column":"1997francesmcdormandfargo","year":"1997"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"34","index":"71","name":"Helen Hunt","name_of_the_movie":"As Good as It Gets","normalized_search_column":"1998helenhuntasgoodasitgets","year":"1998"},{"_rowVariant":"success","age":"26","index":"72","name":"Gwyneth Paltrow","name_of_the_movie":"Shakespeare in Love","normalized_search_column":"1999gwynethpaltrowshakespeareinlove","year":"1999"},{"_rowVariant":"success","age":"25","index":"73","name":"Hilary Swank","name_of_the_movie":"Boys Don't Cry","normalized_search_column":"2000hilaryswankboysdon'tcry","year":"2000"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"33","index":"74","name":"Julia Roberts","name_of_the_movie":"Erin Brockovich","normalized_search_column":"2001juliarobertserinbrockovich","year":"2001"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"35","index":"75","name":"Halle Berry","name_of_the_movie":"Monster's Ball","normalized_search_column":"2002halleberrymonster'sball","year":"2002"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"35","index":"76","name":"Nicole Kidman","name_of_the_movie":"The Hours","normalized_search_column":"2003nicolekidmanthehours","year":"2003"},{"_rowVariant":"success","age":"28","index":"77","name":"Charlize Theron","name_of_the_movie":"Monster","normalized_search_column":"2004charlizetheronmonster","year":"2004"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"30","index":"78","name":"Hilary Swank","name_of_the_movie":"Million Dollar Baby","normalized_search_column":"2005hilaryswankmilliondollarbaby","year":"2005"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"29","index":"79","name":"Reese Witherspoon","name_of_the_movie":"Walk the Line","normalized_search_column":"2006reesewitherspoonwalktheline","year":"2006"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"61","index":"80","name":"Helen Mirren","name_of_the_movie":"The Queen","normalized_search_column":"2007helenmirrenthequeen","year":"2007"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"32","index":"81","name":"Marion Cotillard","name_of_the_movie":"La Vie en rose","normalized_search_column":"2008marioncotillardlavieenrose","year":"2008"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"33","index":"82","name":"Kate Winslet","name_of_the_movie":"The Reader","normalized_search_column":"2009katewinsletthereader","year":"2009"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"45","index":"83","name":"Sandra Bullock","name_of_the_movie":"The Blind Side","normalized_search_column":"2010sandrabullocktheblindside","year":"2010"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"29","index":"84","name":"Natalie Portman","name_of_the_movie":"Black Swan","normalized_search_column":"2011natalieportmanblackswan","year":"2011"},{"_cellVariants":{"name":"primary"},"_rowVariant":"success","age":"62","index":"85","name":"Meryl Streep","name_of_the_movie":"The Iron Lady","normalized_search_column":"2012merylstreeptheironlady","year":"2012"},{"_cellVariants":{"age":"danger"},"_rowVariant":"success","age":"22","index":"86","name":"Jennifer Lawrence","name_of_the_movie":"Silver Linings Playbook","normalized_search_column":"2013jenniferlawrencesilverliningsplaybook","year":"2013"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"44","index":"87","name":"Cate Blanchett","name_of_the_movie":"Blue Jasmine","normalized_search_column":"2014cateblanchettbluejasmine","year":"2014"},{"_cellVariants":{"age":"info"},"_rowVariant":"success","age":"54","index":"88","name":"Julianne Moore","name_of_the_movie":"Still Alice","normalized_search_column":"2015juliannemoorestillalice","year":"2015"},{"_rowVariant":"success","age":"26","index":"89","name":"Brie Larson","name_of_the_movie":"Room","normalized_search_column":"2016brielarsonroom","year":"2016"}],
                filteredItems: []
            }
        },
        mounted() {
            this.rows = this.itemTable.length;
            this.refreshTable();
        },
        methods: {
            refreshTable() {
                if (!this.contentFilterInput) {
                    this.emptySearchString();
                } else {
                    this.nonEmptySearchString();
                }
            },
            emptySearchString() {
                if (this.itemTable.length > this.itemLimit) {
                    this.items = [];
                } else {
                    this.items = this.itemTable;
                }
                this.rows = this.itemTable.length;
                this.currentPage = 1;
            },
            nonEmptySearchString() {
                // remove accented characters
                let normalizedSearchTerm = this.contentFilterInput.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                this.normalizedSearchArray = normalizedSearchTerm.split(" ");

                let filteredItems = this.itemTable.filter(this.textMatch);
                if (filteredItems.length > this.itemLimit) {
                    this.items = [];
                } else {
                    this.items = filteredItems;
                }
                this.rows = filteredItems.length;
            },
            textMatch(item) {
                let itemText = item.normalized_search_column + "";
                let match = true;
                this.normalizedSearchArray.forEach(searchTerm => match = match && (itemText.indexOf(searchTerm) !== -1));
                return match;
            }
        }
    });
</script>
</body>
</html>
